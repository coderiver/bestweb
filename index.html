
<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Счёт.ру</title>
	<meta name="viewport" content="initial-scale=1">
	<meta name="format-detection" content="telephone=no">
	<meta property="og:title" content="">
	<meta property="og:site_name" content="Счёт.ру">
	<meta property="og:description" content="Оплата услуг картой без регистрации, переводы на карту, счет в банке или за границу.">
	<meta property="og:image" content="http://schet.nebo15.me//img/logo_black.png">
	<link rel="icon" href="schet/img/logo_black_48x48.png" sizes="48x48" type="image/png">

	<link href="schet/css/suggestions-15.2.css" rel="stylesheet">
<link href="schet/css/screen.css" rel="stylesheet">


	
	<!--[if lt IE 9]>
	<script src="/js/html5shiv.js"></script>
	<![endif]-->
</head>
<body>

		<script>
		
			(function (i, s, o, g, r, a, m) {
				i['GoogleAnalyticsObject'] = r;
				i[r] = i[r] || function () {
					(i[r].q = i[r].q || []).push(arguments)
				}, i[r].l = 1 * new Date();
				a = s.createElement(o),
						m = s.getElementsByTagName(o)[0];
				a.async = 1;
				a.src = g;
				m.parentNode.insertBefore(a, m)
			})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
			ga('create', 'UA-43266496-9', 'auto');
			ga('require', 'ec');
			ga('set', '&cu', 'RUB');
			ga('send', 'pageview');

			</script>


	<!-- BEGIN  out-->
<div class="out bg_0">
	<!-- begin inner  -->
	<div class="inner">
		<!-- begin header  -->
		<header class="header">
			<div class="header__inner">
				<a href="index.html" class="logo">
					<img src="schet/img/logo-novaplat.png" alt="">
				</a>
				<button class="nav_btn"><span></span></button>
				<div class="nav">
					<nav>
						<a href="index.html" class="is-active">Оплата <br/>услуг</a>
						<a href="transfer.html" class="">Перевод <br/>за границу</a>
						<a href="to_card.html" class="">Перевод <br/>на карту</a>
						<a href="to_bank.html" class="">Перевод <br/>на счет</a>			
					</nav>
				</div>
			</div>						
		</header>
		<!-- end header -->

		<!-- begin container  -->
		<section class="container">
			<div class="main main_mod">
				<div class="topper">
					<h2 class="heading">ПОПОЛНИТЬ ТЕЛЕФОН</h2>
				</div>
				<div class="main__inner main__inner_mod">
					<form class="main__form" data-action="/services/phone">
						<div class="main__field">
							<span class="main__title">номер телефона</span>
							<label class="input-wrap">
								<input type="tel" name="parameters[phoneNumber]" class="input phone_number mb_phone_ru" placeholder="+7 (901) 234 5678"/>
								<span class="input-error"></span>
							</label>
							<span class="main__title">Сумма</span>
							<label class="input-wrap">
								<input type="text" name="amount" class="input input_amount" value="150"/>
								<span class="placeholder">руб.</span>
								<span class="input-error"></span>
							</label>
						</div>
						<a href="#" class="main__logo"><img src="schet/img/logo-op.png" alt=""></a>
						<div class="main__submit">
							<input type="submit" class="btn btn-orange" value="Оплатить">							
						</div>
					</form>
				</div>
			</div>
			<div class="payment">
				<div class="topper">
					<h2 class="heading">ОПЛАТИТЬ УСЛУГУ</h2>
					<div class="search">
						<input type="text" class="search__keyword" placeholder="Найти компанию">
						<button class="search__btn"></button>
					</div>
				</div>
				<div class="service">
					<ul>
						<li class="is-circle">
							<a href="categories/3.html">
								<div><i class="i-mobile"></i></div>
								<span>Мобильная связь</span>
							</a>
						</li>
						<li class="is-circle">
							<a href="categories/6.html">
								<div><i class="i-piggy"></i></div>
								<span>Платежные системы</span>
							</a>
						</li>

						<li class="">
							<a href="categories/5.html">
								<div><i class="i-wifi"></i></div>
								<span>Интернет провайдеры</span>
							</a>
						</li>
						<li class="">
							<a href="categories/18.html">
								<div><i class="i-satellite"></i></div>
								<span>Телевидение</span>
							</a>
						</li>

						<li class="">
							<a href="categories/4.html">
								<div><i class="i-rocket"></i></div>
								<span>Игры и социальные сети</span>
							</a>
						</li>
						<li class="">
							<a href="categories/20.html">
								<div><i class="i-shield"></i></div>
								<span>Охранные службы</span>
							</a>
						</li>
					</ul>
				</div>
				<a href="categories/3.html" class="btn btn-blue">ВСЕ УСЛУГИ</a>
			</div>
		</section>
		<!-- end container -->
	</div>
	<!-- end inner -->
</div>
<!-- END out-->

	<!-- begin footer  -->
	<footer class="footer">
		<div class="inner">
			<a href="index.html#" class="footer__logo">
				<img src="schet/img/footer-logo.png" alt="">
			</a>
			<span class="copyright">©2014 Все права защищены</span>
			<a href="legal.html" class="footer__link">Правовая информация</a>
			<a href="http://schet.copiny.com/topics/new" class="footer__link">
				Сообщить о проблеме
			</a>
		</div>
	</footer>
	<!-- end footer -->

	<!-- begin popup js-popup  -->
	<div class="popup-container" id="ipsp_popup">
		<div class="overlay"></div>
		<div class="popup-wrapper js-popup">
			<div class="popup">
				<span class="popup__text">Вы перенаправляем вас на страницу оплаты</span>
				<img src="schet/img/icons/ipsp-logo.png"/>
			</div>
		</div>
	</div>
	<!-- end popup js-popup -->

	<!-- error popup -->
	<div class="popup-container error_popup">
		<div class="overlay"></div>
		<div class="popup-wrapper js-popup">
			<div class="popup">
				<h2 class="popup__text">Произошла ошибка</h2>
				<span class="popup__text countdown-part"></span>
				<div class="popup__seconds countdown-part">
					<span id="countdown" class="popup__numbers"></span>
					<span class="popup__sec"></span>
					<span class="popup__sec">Попробуйте обновить страницу, зайти позже или обратиться в <a href="http://schet.copiny.com/topics/new">службу поддержки</a>.</span>
				</div>
				<a href="index.html#" onclick="$('.error_popup').hide(); return false;" class="btn btn-blue">Закрыть</a>
			</div>
		</div>
	</div>
	<!-- end error popup -->

	<script src="js/lib/head.js"></script>
<script src="js/lib/jquery.js"></script>
<script src="js/lib/jquery.inputmask.bundle.js"></script>
<script src="js/lib/jquery-ui-custom.min.js"></script>
<script src="js/lib/jquery.validate.js"></script>
<script src="js/lib/jquery.textchange.js"></script>
<script src="js/lib/jquery.xdomainrequest.min.js"></script>
<script src="js/lib/jquery.suggestions-15.2.min.js"></script>
<script src="js/common.js"></script>


		<script type="application/javascript">
		head.ready(function()
		{
//			head.load('/js/routers.js', function() {
//				$('.phone_number').bind('textchange', function() {
//					console.log(detectMobileProvider($(this).val()));
//				});
//			});

			var validation = {
				rules: {
					"parameters[phoneNumber]": {
						"minlength": 12,
						"maxlength": 12,
						"regex": "^\\+7[0-9]{10}$",
						"required": true
					},
					"amount": {
						"required": true,
						"number": true,
						"min": 5,
						"max": 15000
					}
				},
				messages: {
					"parameters[phoneNumber]": {
						"minlength": "Не может быть короче 12 символов",
						"maxlength": "Не может быть длиннее 12 символов",
						"regex": "Неверный формат",
						"required": "Обязательное поле"
					},
					"amount": {
						"min": "Не может быть меньше 5",
						"max": "Не может быть больше 15 000",
						"number": "Должно являться числом",
						"required": "Обязательное поле"
					}
				}
			};

			var $form = $('.main__form');
			$form.validate({
				onfocusout: false,
				showErrors: function (errorMap) {
					console.log('errors', errorMap);
					$form.find(':input').each(function (i) {
						var $input = $(this);
						var property_name = $input.attr('name');
						var $wrap = $input.parent();
						var $msgbox = $wrap.find('.input-error');

						if(undefined == property_name)
							return;

						if (errorMap.hasOwnProperty(property_name)) {
							$msgbox.html(errorMap[property_name]);
							$wrap.addClass('error');
						}
						else {
							$msgbox.html('');
							$wrap.removeClass('error');
						}
					});
				},
				rules: validation.rules,
				messages: validation.messages,
				submitHandler: function (form)
				{
					var $submit_btn = $(form).find(":submit");
					$submit_btn.attr('disabled', 'disabled');
					$.ajax({
						type: $(form).attr('method'),
						url: $(form).data('action'),
						data: $(form).serialize(),
						dataType: 'json'
					}).success(function (response)
					{
						var payment_url = response.data.card.payment_page_url;
						countdown('#ipsp_popup', function () {
							window.location.href = payment_url;
						});
					}).fail(function (response) {
						$submit_btn.removeAttr('disabled');
						var messages = response.responseJSON.meta.error_message;
						$.each(messages, function (field, message) {
							var $el = $('*[name="' + field + '"]');
							$el.addClass('error');
							$el.css('border', '1ps solid red');
						});
					});
					return false;
				}
			});
		});
	</script>

	
	<script>

	</script>
</body>
</html>
